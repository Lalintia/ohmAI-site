<!doctype html>
<html lang="th">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>AI Chatbot Demo</title>
    <meta name="description" content="Demo page for testing AI Chatbot with n8n webhook integration.">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
      /* --- การตั้งค่าหลัก & ดีไซน์พื้นหลัง --- */
      :root { 
        font-family: 'Sora', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Noto Sans Thai", "Noto Sans", sans-serif; 
      }
      body { 
        margin: 0; 
        padding: 0; 
        background-color: #0b0b0f;
        background-image: radial-gradient(circle at top, #1a1a2e 0%, #0b0b0f 50%);
        color: #e6e6f0; 
        line-height: 1.6;
      }
      
      /* --- ส่วน Header & Title --- */
      header { 
        padding: 80px 24px 40px; 
        text-align: center; 
      }
      h1 { 
        font-size: 52px; 
        font-weight: 700;
        margin: 0 0 16px; 
        letter-spacing: 1px; 
        background: -webkit-linear-gradient(45deg, #ffffff, #9ecbff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }
      p.lead { 
        margin: 0; 
        opacity: 0.8; 
        font-size: 1.1rem;
      }

      /* --- ปุ่ม Call-to-Action --- */
      .cta { 
        margin: 32px auto 0; 
        display: inline-block; 
        padding: 14px 24px; 
        border-radius: 12px; 
        background: #4a4a6a; 
        text-decoration: none; 
        color: #ffffff;
        font-weight: 600;
        transition: transform 0.2s ease, background 0.2s ease;
      }
      .cta:hover {
        transform: scale(1.05);
        background: #5a5a8a;
      }

      /* --- Layout แบบ Grid & Card --- */
      .grid { 
        display: grid; 
        gap: 24px; 
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); 
        padding: 28px; 
        max-width: 1000px; 
        margin: 0 auto; 
      }
      .card { 
        background: rgba(21, 21, 29, 0.6);
        border: 1px solid #2a2a3f;
        border-radius: 16px; 
        padding: 24px; 
        backdrop-filter: blur(10px);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }
      .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.25);
      }
      .card h3 { 
        margin: 0 0 12px;
        font-size: 1.25rem;
        font-weight: 600;
        color: #ffffff;
      }
      .card ul {
        padding-left: 20px;
        margin: 0;
      }

      /* --- ส่วน Footer & Links --- */
      footer { 
        text-align: center; 
        padding: 40px 12px 56px; 
        opacity: 0.6; 
      }
      a { 
        color: #9ecbff; 
        text-decoration: none;
      }
      a:hover {
        text-decoration: underline;
      }
      code { 
        background:#0f0f17; 
        border:1px solid #2a2a3f; 
        padding: 2px 6px; 
        border-radius: 6px;
      }

      /* --- ปรับ UX UI ของ Chat Input ให้เต็ม frame --- */
      .n8n-chat .n8n-chat-input {
        width: 100% !important;
        font-family: 'Sora', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Noto Sans Thai", sans-serif !important;
        font-size: 1rem !important;
      }
    </style>

    <link href="https://cdn.jsdelivr.net/npm/@n8n/chat/dist/style.css" rel="stylesheet"/>
</head>
<body>
    <header>
      <h1>AI Chatbot Demo</h1>
      <p class="lead">เพจนี้ถูกสร้างขึ้นเพื่อทดสอบและสาธิตการทำงานของระบบ AI Chatbot</p>
    </header>

    <section class="grid">
      <div class="card">
        <h3>วัตถุประสงค์</h3>
        <p>เพจนี้ใช้สำหรับทดสอบระบบ AI Chatbot และแสดงตัวอย่างการโต้ตอบ เพื่อให้ผู้ใช้งานเข้าใจรูปแบบการทำงานจริง</p>
      </div>
      <div class="card">
        <h3>สิ่งที่สามารถทดสอบได้</h3>
        <ul>
          <li>ถาม-ตอบ ข้อมูลต่าง ๆ </li>
          <li>ทดสอบประสบการณ์ใช้งานจริงของผู้ใช้</li>
        </ul>
      </div>
      <div class="card">
        <h3>เลือก Chatbot</h3>
        <p>เลือก Chatbot ที่คุณต้องการทดสอบจากรายการด้านล่าง:</p>
        <select id="chatbot-selector" style="width: 100%; padding: 10px; border-radius: 8px; background-color: #2a2a3f; color: #e6e6f0; border: 1px solid #4a4a6a;">
          <option value="">-- กรุณาเลือก Chatbot --</option>
          <option value="https://dev.ohmai.me/webhook/3832d42e-759a-4ede-a60e-1c5b0cc139ce/chat">Chatbot A (ยุทธศาสตร์)</option>
          <option value="YOUR_WEBHOOK_URL_FOR_CHATBOT_B">Chatbot B (ทั่วไป)</option>
          <option value="YOUR_WEBHOOK_URL_FOR_CHATBOT_C">Chatbot C (อื่นๆ)</option>
        </select>
      </div>
    </section>

    <footer>© <span id="y"></span> AI Chatbot Demo </footer>
    <script>document.getElementById('y').textContent = new Date().getFullYear();</script>

    <script type="module">
      import { createChat } from "https://cdn.jsdelivr.net/npm/@n8n/chat/dist/chat.bundle.es.js";

      // 1. กำหนดค่าเริ่มต้นของ Chatbot แต่ละตัว
      const chatbotConfigs = {
        // Config สำหรับ Chatbot A
        "https://dev.ohmai.me/webhook/3832d42e-759a-4ede-a60e-1c5b0cc139ce/chat": {
          webhookUrl: "https://dev.ohmai.me/webhook/3832d42e-759a-4ede-a60e-1c5b0cc139ce/chat",
          initialMessages: [
            "ยินดีต้อนรับสู่ Chatbot A (ยุทธศาสตร์)!",
            "คุณสามารถสอบถามข้อมูลด้านยุทธศาสตร์ได้ที่นี่",
          ],
          i18n: {
            th: {
              title: "Chatbot A (ยุทธศาสตร์)",
              subtitle: "เดโมสำหรับลูกค้า",
              inputPlaceholder: "พิมพ์คำถามเกี่ยวกับยุทธศาสตร์...",
            },
          },
        },
        // Config สำหรับ Chatbot B
        "YOUR_WEBHOOK_URL_FOR_CHATBOT_B": {
          webhookUrl: "YOUR_WEBHOOK_URL_FOR_CHATBOT_B",
          initialMessages: [
            "สวัสดีครับ! นี่คือ Chatbot B (ทั่วไป)",
            "มีอะไรให้ช่วย สามารถถามได้เลย",
          ],
          i18n: {
            th: {
              title: "Chatbot B (ทั่วไป)",
              subtitle: "เดโมสำหรับลูกค้า",
              inputPlaceholder: "พิมพ์ข้อความเพื่อทดสอบ...",
            },
          },
        },
        // เพิ่ม Config สำหรับ Chatbot C หรืออื่นๆ ที่นี่
        "YOUR_WEBHOOK_URL_FOR_CHATBOT_C": {
          webhookUrl: "YOUR_WEBHOOK_URL_FOR_CHATBOT_C",
          initialMessages: [
            "สวัสดีครับ! นี่คือ Chatbot C",
          ],
          i18n: {
            th: {
              title: "Chatbot C",
              subtitle: "เดโมสำหรับลูกค้า",
              inputPlaceholder: "พิมพ์ข้อความ...",
            },
          },
        }
      };

      // 2. ดึง Element ของเมนู Dropdown
      const selector = document.getElementById('chatbot-selector');
      let currentChatInstance = null; // ตัวแปรสำหรับเก็บ Chat instance ปัจจุบัน

      // 3. สร้างฟังก์ชันสำหรับเริ่มต้น Chatbot
      function initializeChat(config) {
        // ถ้ามี Chatbot เก่าเปิดอยู่ ให้ทำลายทิ้งก่อน
        if (currentChatInstance) {
          currentChatInstance.destroy();
        }
        // สร้าง Chatbot ใหม่ตาม config ที่เลือก และเก็บ instance ไว้
        currentChatInstance = createChat(config);
      }

      // 4. สร้าง Event Listener เพื่อรอการเปลี่ยนแปลงจากเมนู
      selector.addEventListener('change', (event) => {
        const selectedWebhookUrl = event.target.value;

        // ถ้าผู้ใช้เลือก Chatbot (ไม่ใช่ตัวเลือก '-- กรุณาเลือก --')
        if (selectedWebhookUrl && chatbotConfigs[selectedWebhookUrl]) {
          const selectedConfig = chatbotConfigs[selectedWebhookUrl];
          initializeChat(selectedConfig);
        } else {
          // ถ้าผู้ใช้เลือกกลับไปที่ '-- กรุณาเลือก --' ให้ปิด Chatbot ไปเลย
          if (currentChatInstance) {
            currentChatInstance.destroy();
            currentChatInstance = null;
          }
        }
      });
    </script>
</body>
</html>
